(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-660c2e34"],{5188:function(t,e,a){},9457:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-canvas"},[a("el-alert",{attrs:{title:"html2canvas",type:"success",closable:!1}}),t._v(" "),a("div",{ref:"canvasDom",staticClass:"canvas-html"},[a("div",{staticClass:"canvas-left"},[a("img",{attrs:{width:"400",src:t.httpImg,alt:""}}),t._v(" "),a("div",[t._v("网络图片")])]),t._v(" "),t._m(0)]),t._v(" "),a("div",{staticClass:"PADTB20"},[a("el-button",{attrs:{type:"primary"},on:{click:t.previewPoster}},[t._v("预览海报")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.empty}},[t._v("清空海报")]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:!t.vueCanvasSrc},on:{click:t.downloadVueCanvas}},[t._v("下载 vue-canvas-poster 海报(png)")]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:!t.canvasData},on:{click:t.downloadPoster}},[t._v("下载 html2canvas 海报(png)")]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:!t.canvasData},on:{click:t.downloadPDF}},[t._v("下载 html2canvas 海报(pdf)")])],1),t._v(" "),a("el-alert",{attrs:{title:"我是 native 海报",type:"success",closable:!1}}),t._v(" "),a("div",{ref:"nativeDom",staticStyle:{height:"248px"}}),t._v(" "),a("el-alert",{attrs:{title:"我是 vue-canvas-poster 海报",type:"success",closable:!1}}),t._v(" "),a("vue-canvas-poster",{attrs:{widthPixels:1e3,painting:t.painting},on:{success:t.success,fail:t.fail}}),t._v(" "),a("img",{staticStyle:{width:"700px"},attrs:{src:t.vueCanvasSrc,alt:""}}),t._v(" "),a("el-alert",{attrs:{title:"我是 html2canvas 下载海报",type:"success",closable:!1}}),t._v(" "),a("div",{ref:"downloadDom",staticStyle:{height:"248px"}},[a("img",{attrs:{src:t.downloadImg,alt:""}})]),t._v(" "),a("el-alert",{attrs:{title:"我是 html2canvas 生成的原始海报(高分辨率会被放大)",type:"success",closable:!1}}),t._v(" "),a("img",{attrs:{src:t.canvasData,alt:""}})],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"canvas-riight"},[n("img",{attrs:{width:"200",src:a("e94e"),alt:""}}),t._v(" "),n("div",[t._v("静态图片")])])}],s=a("e81a"),o=a.n(s),c=a("1af7"),l=a.n(c),r={data:function(){return{httpImg:"",canvasData:"",downloadImg:"",vueCanvasSrc:"",painting:{}}},mounted:function(){var t=this;this.painting={},this.getBas64("https://mifbb-upload-image.oss-cn-hangzhou.aliyuncs.com/mifbb_online_app/decoration/20200327/cb2d839481c4f7b275a2bb084e838d6a.png").then((function(e){t.httpImg=e,t.painting={width:"700px",height:"243px",background:"#fff",views:[{type:"image",url:t.httpImg,css:{top:"0px",left:"0px",width:"400px",height:"167px"}},{type:"text",text:"网络图片",css:{top:"170px",left:"158px",color:"grey",fontSize:"16px"}},{type:"image",url:a("e94e"),css:{top:"0px",left:"420px",width:"200px",height:"200px"}}]};var n=document.createElement("canvas"),i=n.getContext("2d"),s=new Image,o=t;t.$refs.nativeDom[0]&&t.$refs.nativeDom.removeChild(t.$refs.nativeDom[0]),s.src=t.httpImg,s.onload=function(){n.width=700,n.height=243,i.fillStyle="#fff",i.fillRect(0,0,n.width,n.height),i.drawImage(s,0,0,400,166);var t=new Image;t.src=a("e94e"),t.onload=function(){i.drawImage(t,420,0,200,220),i.font="16px 微软雅黑",i.fillStyle="grey",i.textAlign="center",i.fillText("网络图片",200,188),o.$refs.nativeDom.appendChild(n)}}}))},methods:{previewPoster:function(){var t=this;o()(this.$refs.canvasDom,{}).then((function(e){t.canvasData=e.toDataURL("image/png");var a=document.createElement("canvas"),n=a.getContext("2d"),i=new Image;i.src=t.canvasData;var s=t;i.onload=function(){window.devicePixelRatio>1?(a.width=i.width/2,a.height=i.height/2,n.drawImage(i,0,0,a.width,a.height),a.toBlob((function(t){var e=URL.createObjectURL(t);s.downloadImg=e}),"image/png",1)):(a.width=i.width,a.height=i.height,n.drawImage(i,0,0),s.downloadImg=a.toDataURL("image/png")),a=null}}))},empty:function(){this.canvasData=null,this.downloadImg=null},success:function(t){this.vueCanvasSrc=t},fail:function(t){console.log("fail:",t)},downloadVueCanvas:function(){var t=document.createElement("a");t.href=this.vueCanvasSrc,t.setAttribute("download","poster"+Date.now()+".png"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},downloadPoster:function(){var t=document.createElement("a");t.href=this.downloadImg,t.setAttribute("download","poster"+Date.now()+".png"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},downloadPDF:function(){var t=new l.a("","pt","a4");t.addImage(this.downloadImg,"png",0,0),t.save(Date.now()+".pdf")},getBas64:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png";return new Promise((function(a,n){var i=document.createElement("canvas"),s=i.getContext("2d"),o=new Image;o.crossOrigin="Anonymous",o.onload=function(){i.width=o.width,i.height=o.height,s.drawImage(o,0,0);var t=i.toDataURL(e);i=null,a(t)},o.src=t+"?t="+Date.now()}))}}},d=r,v=(a("cfdc"),a("9ca4")),p=Object(v["a"])(d,n,i,!1,null,null,null);e["default"]=p.exports},cfdc:function(t,e,a){"use strict";var n=a("5188"),i=a.n(n);i.a}}]);